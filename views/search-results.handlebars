<div>
    <div id="modal" class='modal'>
        <div class="modal__content">
            <div class='modal__status'>
                Loading...
            </div>
            <h2 class="modal__content__food-name">sfdg</h2>            
            <div class='modal__content__ing-list'>

            </div>

            {{!-- <table class='modal__content__nutrients-table'>
                <thead>
                    <tr>
                        <td>Name</td>
                        <td>Amount</td>
                    </tr>
                </thead>
            </table> --}}

        </div>
    </div>
    Search Results
    <div>
        hey
        <div>
            Total Results: {{totalResults}}
        </div>
        {{#if tooLarge}}
            <div>
                Can't show all results, consider refining your search
            </div>
        {{/if}}
        <ul class='food-list'>
            {{#each foods}}
                <li class='food-list__item-container'>
                    <div class='food-list__item' ndbno={{this.ndbno}}>
                        {{this.name}}
                    </div>
                </li>
            {{/each}}
        </ul>
    </div>
</div>
<script>

    const splitByComma = string => { 
        const parsedString = string.substring(0, string.length - 1);
        return parsedString.split(',')
    }

    // Diplay modal
    $('.food-list__item').on('click', function() {


        // Clears text
        $(".modal__content__food-name").text('')


        $("#modal").css({"display": "block"});

        $(".modal__status").text('Loading...');

        const ndbno = ($(this).attr('ndbno'));



        axios.get(`/food/${ndbno}`)
        .then(res => {
            const food = res.data;
            console.log(food);

            const ingredients = food.ing.desc;

            $('.modal__content__ing-list').text(ingredients);

            $(".modal__status").text('');
            $(".modal__content__food-name").text(food.desc.name);
        })
    })

    // Hide modal

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

</script>